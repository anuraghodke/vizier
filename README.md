# Vizier - AI-Assisted 2D Animation Inbetweening Tool

## Overview
Vizier helps artists create smooth 2D animations by auto-generating intermediate frames between keyframes. Designed for artists working with tools like Procreate who want to achieve old-school cel animation quality with modern AI assistance.

## Animation Style Philosophy

Vizier is built to support **classic cel animation techniques** with a focus on eccentric, boundary-pushing animation exemplified by films like:

- **The Thief and the Cobbler** (Richard Williams)
- Dynamic tracking shots and camera movements
- Complex perspective systems with moving vanishing points
- True parallax depth (not simple multiplane)

### Key Principle: Physics-Based Interpolation

Unlike simple crossfading or morphing, Vizier uses **motion-aware interpolation** to ensure:

- **Objects move, not fade**: A red ball on the left becomes a blue ball on the right by actually moving across the screen while changing color (purple in the middle), not by fading out and fading in
- **Spatial continuity**: Objects maintain identity and follow natural motion paths
- **Proper property interpolation**: Color, position, scale, and rotation all transition smoothly

**Example:**
```
Frame 1: Red ball at left (x=10)
Frame 2: Purple ball at center (x=50)  ← Generated by Vizier
Frame 3: Blue ball at right (x=90)
```

For more details, see [ANIMATION_STYLE.md](docs/ANIMATION_STYLE.md).

## Features

- Upload 2 PNG keyframes with transparency
- Describe motion in natural language (e.g., "create 8 bouncy frames")
- AI-powered frame interpolation using Google's FILM model
- Download frames as ZIP for import into Procreate or other animation tools

## Tech Stack

- **Backend**: FastAPI, Celery, Redis, TensorFlow (FILM model)
- **Frontend**: Next.js, React, TypeScript, TailwindCSS
- **AI**: Google FILM (Frame Interpolation for Large Motion), Claude API
- **Infrastructure**: Docker Compose

## Quick Start

### Prerequisites
- Docker Desktop
- Python 3.10+ (for local development/testing)
- Node.js 20+ (for frontend development)
- Anthropic API key ([Get one here](https://console.anthropic.com/settings/keys))

### Setup

```bash
# Clone repository
git clone <repository-url>
cd vizier

# Configure environment
cp .env.example .env
# Edit .env and add your ANTHROPIC_API_KEY

# Start services
docker-compose up -d

# Access application
# Frontend: http://localhost:3000
# Backend API: http://localhost:8000
# API Docs: http://localhost:8000/docs
```

### Running Tests

```bash
# Activate virtual environment
source .venv/bin/activate

# Test FILM model
python tests/test_film_setup.py
python tests/test_film_with_images.py

# Test Claude API (requires ANTHROPIC_API_KEY in .env)
python tests/test_claude_api.py

# Test backend services
python tests/test_services.py
```

## Development

### Project Structure

```
vizier/
├── backend/          # FastAPI application and services
├── frontend/         # Next.js React application
├── docs/            # Project documentation
├── tests/           # Test files and assets
├── models/          # FILM model (gitignored)
├── uploads/         # Temporary keyframe storage (gitignored)
└── outputs/         # Generated frames (gitignored)
```

### Running Locally

**Backend:**
```bash
cd backend
source ../.venv/bin/activate
uvicorn app.main:app --reload
```

**Frontend:**
```bash
cd frontend
npm install
npm run dev
```

**Celery Worker:**
```bash
cd backend
celery -A app.workers.celery_worker worker --loglevel=info
```